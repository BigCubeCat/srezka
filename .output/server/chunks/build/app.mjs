import { ssr, ssrHydrationKey, escape, createComponent, ssrAttribute } from 'solid-js/web';
import { createSignal } from 'solid-js';

var D=["<div",' class="Row"><div class="Label">','</div><input class="ColorPicker" type="color"',"></div>"];const U=t=>ssr(D,ssrHydrationKey(),escape(t.label),ssrAttribute("value",escape(t.value,true),false));var F=["<div",' class="Column"><div class="Label">','</div><input class="SpinBox" type="number" min="1"',"></div>"];const I=t=>ssr(F,ssrHydrationKey(),escape(t.label),ssrAttribute("value",escape(t.value,true),false));var S=["<div",' class="Config"><div class="Geometry"><!--$-->',"<!--/--><!--$-->","<!--/--></div><!--$-->","<!--/--></div>"];const _=t=>ssr(S,ssrHydrationKey(),escape(createComponent(I,{label:"Строк",get value(){return t.rows},get callback(){return t.setRows}})),escape(createComponent(I,{label:"Столбцов",get value(){return t.cols},get callback(){return t.setCols}})),escape(createComponent(U,{label:"Цвет",get onChange(){return t.setColor},get value(){return t.color}})));var A=["<div",' class="file-input-container"><input type="file" accept="image/png, image/jpeg" style="','"><button type="button" class="file-input-button">',"</button></div>"];const G=t=>ssr(A,ssrHydrationKey(),"display:none",escape(t.label)||"Выберите файл"),P=t=>createComponent(G,{label:"Файл с картой",handleFileChange:n=>{const a=n.target;if(a.files&&a.files[0]){const v=a.files[0],c=new FileReader;c.onload=d=>{t.imageCallback(d.target?.result);},c.readAsDataURL(v);}}}),L=(t,i,n,a,v)=>{const c=[];for(let d=0;d<t;d++)for(let l=0;l<i;l++){const u=document.createElement("canvas");u.width=n,u.height=a;const f=u.getContext("2d");f&&(f.drawImage(v,l*n,d*a,n,a,0,0,n,a),c.push(u.toDataURL("image/png")));}return c},T=15,j=12,M=()=>{const[t,i]=createSignal(null),[n,a]=createSignal(null),[v,c]=createSignal([]);return {imageSrc:t,setImageSrc:i,fullImageDataUrl:n,cellDataUrls:v,generateGrid:(l,u,f)=>{if(!t())return;const o=new Image;o.onload=()=>{const r=document.createElement("canvas"),e=r.getContext("2d");if(!e)return;o.width>o.height?(r.width=o.height,r.height=o.width,e.save(),e.translate(r.width,0),e.rotate(Math.PI/2),e.drawImage(o,0,0),e.restore()):(r.width=o.width,r.height=o.height,e.drawImage(o,0,0));const w=r.width/u,$=r.height/l;c(L(l,u,w,$,r)),e.strokeStyle=f,e.lineWidth=2;for(let s=0;s<=u;s++){const m=s*w;e.beginPath(),e.moveTo(m,0),e.lineTo(m,r.height),e.stroke();}for(let s=0;s<=l;s++){const m=s*$;e.beginPath(),e.moveTo(0,m),e.lineTo(r.width,m),e.stroke();}e.font="20px Arial",e.fillStyle=f,e.textAlign="center",e.textBaseline="middle";for(let s=0;s<l;s++)for(let m=0;m<u;m++){const x=`${String.fromCharCode(65+s)}${m+1}`,R=m*w+T,k=s*$+j;e.fillText(x,R,k);}a(r.toDataURL("image/png"));},o.src=t();}}},B=(t=3,i=3)=>{const[n,a]=createSignal(t),[v,c]=createSignal(i),[d,l]=createSignal("#000000");return {rows:n,setRows:a,cols:v,setCols:c,color:d,setColor:l}};var E=["<div",' class="MainComponent"><!--$-->',"<!--/--><!--$-->",'<!--/--><button type="button" class="download-button">Скачать</button></div>'];const X=()=>{const{rows:t,cols:i,color:n,setRows:a,setCols:v,setColor:c}=B(),{setImageSrc:d,generateGrid:l,fullImageDataUrl:u}=M(),f=e=>{d(e),l(t(),i(),n());},o=e=>w=>{e(w),l(t(),i(),n());},r=e=>{c(e),l(t(),i(),n());};return ssr(E,ssrHydrationKey(),escape(createComponent(_,{get rows(){return t()},get cols(){return i()},get color(){return n()},get setRows(){return o(a)},get setCols(){return o(v)},setColor:r})),escape(createComponent(P,{imageCallback:f,get dataUrl(){return u()||""}})))};var Y=["<div",' class="app">',"</div>"];const J=()=>ssr(Y,ssrHydrationKey(),escape(createComponent(X,{})));

export { J as default };
//# sourceMappingURL=app.mjs.map
